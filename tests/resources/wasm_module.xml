<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<template name="wasm-module-format" version="0.1">
    <field name="magic" size="4" signature="0x0061736D"></field>
    <field name="version" size="4" signature="0x01000000"></field>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="type-section" signature="0x01">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="import-section" signature="0x02" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}">
            <field name="num" size="{converter=leb128size}"></field>
            <vector name="import_header" count="{num, converter=leb128u}">
                <field name="module_string_length" size="{converter=leb128size}"></field>
                <field name="module_string_data" size="{module_string_length, converter=leb128u}"></field>
                <field name="method_string_length" size="{converter=leb128size}"></field>
                <field name="method_string_data" size="{method_string_length, converter=leb128u}"></field>
                <field name="import_kind" size="1"></field>
                <field name="import_signature_index" size="{converter=leb128size}"></field>
            </vector>
        </blob>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="function-section" signature="0x03" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}">
            <field name="num" size="{converter=leb128size}"></field>
            <vector name="function-typeidx"
                    size="{converter=leb128size}"
                    count="{num, converter=leb128u}">
            </vector>
        </blob>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="table-section" signature="0x04" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="memory-section" signature="0x05" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="global-section" signature="0x06" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="export-section" signature="0x07" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="start-section" signature="0x08" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <field name="start-funcidx" size="{converter=leb128size}"></field>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="element-section" signature="0x09" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="code-section" signature="0x0A" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="code" size="{length, converter=leb128u}">
            <field name="num_functions" size="{converter=leb128size}"></field>
            <field name="function" count="{num_functions, converter=leb128u}">
                <field name="func_body_size" size="{converter=leb128size}"></field>
                <field name="func_body" size="{func_body_size, converter=leb128u}">
                    <field name="num_locals" size="{converter=leb128size}"></field>
                    <vector name="locals" count="{num_locals, converter=leb128u}">
                        <field name="local_type_count" size="{converter=leb128size}"></field>
                        <field name="local_type" size="1"></field>
                    </vector>
                    <field name="instructions" sizing="stretch"></field>
                </field>
            </field>
        </blob>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
    <section name="data-section" signature="0x0B" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
    </section>
    <section name="custom-section" signature="0x00" hint="optional">
        <field name="id" size="1"></field>
        <field name="length" size="{converter=leb128size}"></field>
        <blob name="data" size="{length, converter=leb128u}"></blob>
    </section>
</template>
